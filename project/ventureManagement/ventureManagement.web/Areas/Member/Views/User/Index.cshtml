@{
    ViewBag.Title = "用户管理";
    Layout = "~/Views/Shared/_BaseLayout.cshtml";
    var X = Html.X();
}

@section headtag
{
    <script>
        var resetCreateForm = function() {
            App.SubordinateDepartment.setValue('');
            App.Description.setValue('');
            App.newOrganization.hide();
        };
    </script>
}

    

@section menu
{
    @(
        X.GridPanel()
            .Title("用户列表")
            .Frame(true)
            .Height(400)
            .Store(
                Html.X().Store()
                    .Proxy(Html.X().AjaxProxy()
                        .Url(Url.Action("Read"))
                        .Reader(Html.X().JsonReader().Root("data"))
                    )
                    .RemoteSort(true)
                    .PageSize(2)
                    .Model(
                            Html.X().Model()
                                .IDProperty("UserId")
                                .Fields(
                                    Html.X().ModelField().Name("UserId"),
                                    Html.X().ModelField().Name("UserName"),
                                    Html.X().ModelField().Name("DisplayName"),
                                    Html.X().ModelField().Name("Email"),
                                    Html.X().ModelField().Name("Mobile"),
                                    Html.X().ModelField().Name("RegistrationTime").Type(ModelFieldType.Date),
                                    Html.X().ModelField().Name("LoginTime").Type(ModelFieldType.Date),
                                    Html.X().ModelField().Name("LoginIP"),
                                    Html.X().ModelField().Name("Status")
                                )
                            )
                    )
                    
            .ColumnModel(
                Html.X().Column().DataIndex("UserId").Text("Id").Hidden(true),
                Html.X().Column().DataIndex("UserName").Text("用户名"),
                Html.X().Column().DataIndex("DisplayName").Text("昵称"),
                Html.X().Column().DataIndex("Email").Text("Email"),
                Html.X().Column().DataIndex("Mobile").Text("手机号"),
                Html.X().DateColumn().DataIndex("RegistrationTime").Text("注册时间").Format("yyyy-MM-dd"),
                Html.X().DateColumn().DataIndex("LoginTime").Text("最近登录时间").Format("yyyy-MM-dd"),
                Html.X().Column().DataIndex("LoginIP").Text("最近登录的IP"),
                Html.X().Column().DataIndex("Status").Text("状态"))
            .BottomBar(
                Html.X().PagingToolbar()
                    .BeforePageText("页")
                    .AfterPageText("第{0}页")
                    .DisplayInfo(true)
                    .DisplayMsg("显示用户 {0} - {1} 共 {2}")
                    .EmptyMsg("没有用户"))
    )
}